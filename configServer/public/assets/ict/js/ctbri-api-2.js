var API=function(){return{head:function(){var a={"Api-Version":"1.0","Client-OS":"3","Client-Type":"3",Nonce:Math.floor(10000000+Math.random()*(89999999)),"Sign-Method":"HMAC-SHA1",TimeStamp:new Date().getTime()};return a},sign:function(a){return CryptoJS.HmacSHA1(a,"h2Yrr0tVrgPSw1AI8hwjpoh6KqSRfxWK&")},signIn:function(f){try{var b=API.head();var d="ap_address="+$.url().param("gw_address")+"&ap_mac="+$.url().param("gw_id").replace(/:/gm,"")+"&client_mac="+$.url().param("mac").replace(/:/gm,"")+"&user_ip="+$.url().param("public_ip")+"&z="+new Date().getTime();var c=$.param(b)+"&"+d;b.Sign=CryptoJS.enc.Base64.stringify(API.sign(encodeURIComponent(c)));$.ajax({type:"GET",url:"http://42.123.76.46/api/ap/ctbri/sign_in_free.json",data:d,headers:b,success:function(e){if(e.ret=="0"){var i=$.url().param();var h=e.data.auth_token;var g="http://"+i.gw_address+":"+i.gw_port+"/ctbrihuang/auth?token="+h;location.href=g}else{alert(e.desp);location.href="http://www.baidu.com"}},error:function(e){alert("请求错误，请稍后再试。");location.href="http://www.baidu.com"}})}catch(a){alert("浏览器发生错误，请重启浏览器。");location.href="http://www.baidu.com"}}}}();